const createCsvWriter = require('csv-writer').createObjectCsvWriter;
const csvWriter = createCsvWriter({
  path: 'classlist.csv',
  header: [
    {id: 'id', title: 'ID'},
    {id: 'code', title: 'Code'},
    {id: 'name', title: 'Name'},
    {id: 'credits', title: 'Credits'},
  ]
});

[
    {
      "id": 1,
      "code": "EGGG101",
      "name": "Introduction to Engineering",
      "credits": 3
    },
    {
      "id": 2,
      "code": "CISC108",
      "name": "Intro to Computer Science 1",
      "credits": 3
    },
    {
      "id": 3,
      "code": "MATH241",
      "name": "Analytic Geometry & Calculus A",
      "credits": 4
    },
    {
      "id": 4,
      "code": "ENGL110",
      "name": "Seminar in Composition",
      "credits": 3
    },
    {
      "id": 5,
      "code": "Breadth Requirement (CAH)",
      "name": "Humanities breadth requirement",
      "credits": 3
    }
  ]

  csvWriter
  .writeRecords(data)
  .then(()=> console.log('The CSV file was written successfully'));

  const csv = require('csv-parser');
const fs = require('fs');

fs.createReadStream('data.csv')
  .pipe(csv())
  .on('data', (row) => {
    console.log(row);
  })
  .on('end', () => {
    console.log('CSV file successfully processed');
  });